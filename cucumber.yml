# WontoMedia - a wontology web application
# Copyright (C) 2009 - Glen E. Ivey
#    www.wontology.com
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License version
# 3 as published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program in the file COPYING and/or LICENSE.  If not,
# see <http://www.gnu.org/licenses/>.

<%
  common  = "--color --strict --format progress --tags ~@invalid "
  rake    = "--tags ~@invalid --tags ~@extended "
  static  = "-r features/support/env.rb -r features/support/local.rb " +
            "-r features/support/static.rb -r features/step_definitions "
  dynamic = "-r features/support/env.rb -r features/support/local.rb " +
            "-r features/support/dynamic.rb -r features/step_definitions "
  static_only  = "--exclude=dynamic   features "
  dynamic_only = "--exclude=static    features "
%>

default:            <%= common + rake + dynamic %>
                       --tags ~@not_for_selenium
                       --format pretty                             features

selenium:           <%= common +        dynamic %>
                       --tags ~@not_for_selenium --tags ~@invalid  features

manual:             <%= common +        dynamic %>
                       --tags ~@not_for_selenium --tags ~@invalid
                       --format pretty                             features

  # profiles to be used from rake
static_acceptance:
  <%= common + rake + static  %> --tags ~@wip        <%= static_only %>
static_unfinished:
  <%= common + rake + static  %> --tags  @wip        <%= static_only %>
dynamic_acceptance:
  <%= common + rake + dynamic %> --tags ~@wip        <%= dynamic_only %>
dynamic_unfinished:
  <%= common + rake + dynamic %> --tags  @wip        <%= dynamic_only %>
autotest:
  <%= common + rake + static  %> --tags ~@wip -r lib <%= static_only %>
autotest-all:
  <%= common +        static  %>              -r lib <%= static_only %>
