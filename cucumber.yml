# WontoMedia - a wontology web application
# Copyright (C) 2010 - Glen E. Ivey
#    www.wontology.com
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License version
# 3 as published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program in the file COPYING and/or LICENSE.  If not,
# see <http://www.gnu.org/licenses/>.

<%
  uber_common  = "--color --strict "
  common       = uber_common + "--format progress "
  tags_common  = "~@invalid"
  tags_rake    = "~@extended"
  static       = "-r features/support/env.rb -r features/support/local.rb " +
                 "-r features/support/static.rb -r features/step_definitions "
  dynamic      = "-r features/support/env.rb -r features/support/local.rb " +
                 "-r features/support/dynamic.rb -r features/step_definitions "
  static_only  = "--exclude=dynamic   features "
  dynamic_only = "--exclude=static    features "
%>

default:            <%= uber_common + dynamic %>
                       --tags <%= tags_common+","+
                                  tags_rake+",~@not_for_selenium" %>
                       --format pretty                               features

selenium:           <%= common      + dynamic %>
                       --tags <%= tags_common+","+
                                             "~@not_for_selenium" %> features

manual:             <%= uber_common + dynamic %>
                       --tags <%= tags_common+","+
                                             "~@not_for_selenium" %>
                       --format pretty


  # profiles to be used from rake
static_acceptance:
  <%= common + static  %> --tags
    <%= tags_common+","+tags_rake+",~@wip        " + static_only %>
static_unfinished:
  <%= common + static  %> --tags
    <%= tags_common+","+tags_rake+",@wip         " + static_only %>
dynamic_acceptance:
  <%= common + dynamic %> --tags
    <%= tags_common+","+tags_rake+",~@wip        " + dynamic_only %>
dynamic_unfinished:
  <%= common + dynamic %> --tags
    <%= tags_common+","+tags_rake+",@wip         " + dynamic_only %>

autotest:
  <%= common + static  %> --tags
    <%= tags_common+","+tags_rake+",~@wip -r lib " + static_only %>
autotest-all:
  <%= common + static  %> --tags
    <%= tags_common+","+tags_rake+"       -r lib " + static_only %>
